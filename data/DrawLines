$win = $native.window
$doc = $win.document

$debug = $doc.getElementById('debug')

class Canvas
  def canvas; @canvas; end
  def context; @context; end
  def background=(bg); @background = bg; end

  def initialize(width = nil, height = nil)
    @canvas = $doc.getElementById('canvas')
    unless @canvas
       puts "create canvas"
       @canvas = $doc.createElement('canvas')
       $debug.appendChild(@canvas)
    end
    @canvas.width = width if width
    @canvas.height = height if height
    @width = @canvas.width
    @height = @canvas.height
    @context = @canvas.getContext('2d')
    @background = 'rgb(0, 0, 0)'

    clear
  end

  def clear
    @context.fillStyle = @background
    @context.fillRect(0, 0, @width, @height)
  end
end


canvas = Canvas.new(300, 300)
canvas.background = 'rgb(255,255,255)'
canvas.clear

num = 0
ctx = canvas.context
ctx.strokeStyle = 'rgb(255, 0, 0)'
ctx.lineWidth = 1

   num = 11
   
   num.times {|x|
      x1 = x*10
      x2 = 100-x1
      num.times {|y|  
          y1 = y*10
          y2 = 100-y1
          ctx.beginPath
          ctx.moveTo x1, y1
          ctx.lineTo x2, y2
          ctx.stroke
      }
   }

